{"version":3,"file":"static/js/995.6dfcda3d.chunk.js","mappings":"sMAMA,MAAMA,EAAoBC,IAAsB,IAArB,OAAEC,EAAS,IAAID,EACxC,MAAM,KAAEE,IAASC,EAAAA,EAAAA,MACVC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,OAEnCG,EAAAA,EAAAA,WAAU,KACRC,KACC,IAEH,MAAMA,EAAaC,UACjB,IACE,MAAMC,QAAiBC,EAAAA,GAAUC,oBACjCN,EAASI,EAASG,KACpB,CAAE,MAAOC,GACPC,QAAQC,MAAM,wBAAyBF,EACzC,CAAC,QACCX,GAAW,EACb,GAIIc,GAAiBC,EAAAA,EAAAA,SAAQ,IACpB,OAAJlB,QAAI,IAAJA,GAAAA,EAAMmB,GAGJpB,EAAOqB,OAAOC,GAEfA,EAAMC,YACDD,EAAMC,cAAgBtB,EAAKmB,IAGhCnB,EAAKuB,QAASF,EAAMG,eACfH,EAAMG,gBAAkBxB,EAAKuB,OAVlBxB,EAerB,CAACA,EAAQC,IAENyB,GAAeP,EAAAA,EAAAA,SAAQ,IACpBD,EAAeS,OAAO,CAACC,EAAKN,KACjCM,EAAIN,EAAMO,SAAWD,EAAIN,EAAMO,SAAW,GAAK,EACxCD,GACN,CAAC,GACH,CAACV,IAEEY,GAAeX,EAAAA,EAAAA,SAAQ,IACpB,IAAID,GACRa,KAAK,CAACC,EAAGC,IAAM,IAAIC,KAAKD,EAAEE,WAAa,IAAID,KAAKF,EAAEG,YAClDC,MAAM,EAAG,GACX,CAAClB,IAEEmB,GAAWC,EAAAA,EAAAA,MAAKC,IAAA,IAAC,MAAEC,EAAK,MAAEC,EAAK,KAAEC,EAAI,MAAEC,EAAK,MAAEC,EAAQ,GAAGL,EAAA,OAC7DM,EAAAA,EAAAA,MAACC,EAAAA,EAAOC,IAAG,CACTC,UAAU,qBACVC,QAAS,CAAEC,QAAS,EAAGC,EAAG,IAC1BC,QAAS,CAAEF,QAAS,EAAGC,EAAG,GAC1BE,WAAY,CAAET,QAAOU,SAAU,IAAMC,SAAA,EAErCC,EAAAA,EAAAA,KAAA,OAAKR,UAAU,qBAAqBS,MAAO,CAAEC,WAAW,GAADC,OAAKhB,EAAK,MAAMA,SAAQY,SAC5Eb,KAEHG,EAAAA,EAAAA,MAAA,OAAKG,UAAU,wBAAuBO,SAAA,EACpCC,EAAAA,EAAAA,KAAA,KAAGR,UAAU,sBAAqBO,SAAEf,KACpCgB,EAAAA,EAAAA,KAAA,MAAIR,UAAU,sBAAqBO,SAAEd,YAK3C,OAAItC,GACKqD,EAAAA,EAAAA,KAAA,OAAKR,UAAU,mBAAkBO,SAAC,+BAIzCV,EAAAA,EAAAA,MAAA,OAAKG,UAAU,qBAAoBO,SAAA,EACjCV,EAAAA,EAAAA,MAACC,EAAAA,EAAOC,IAAG,CACTE,QAAS,CAAEC,QAAS,GACpBE,QAAS,CAAEF,QAAS,GACpBF,UAAU,4BAA2BO,SAAA,EAErCC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,kBACJV,EAAAA,EAAAA,MAAA,KAAAU,SAAA,CAAG,kBAAmB,OAAJtD,QAAI,IAAJA,OAAI,EAAJA,EAAM2D,cAAkB,OAAJ3D,QAAI,IAAJA,OAAI,EAAJA,EAAM4D,WAAY,WAAW,uCAGrEhB,EAAAA,EAAAA,MAAA,OAAKG,UAAU,sBAAqBO,SAAA,EAClCC,EAAAA,EAAAA,KAACnB,EAAQ,CACPG,MAAM,mBACNC,MAAOf,EAAaoC,SAAWpC,EAAa,mBAAqB,IAAMA,EAAaqC,OAAS,IAAM,EACnGrB,KAAK,eACLC,MAAM,wBACNC,MAAO,MAETY,EAAAA,EAAAA,KAACnB,EAAQ,CACPG,MAAM,mBACNC,MAAOf,EAAaoC,SAAW,EAC/BpB,KAAK,SACLC,MAAM,wBACNC,MAAO,MAETY,EAAAA,EAAAA,KAACnB,EAAQ,CACPG,MAAM,mBACNC,MAAOf,EAAasC,WAAa,EACjCtB,KAAK,SACLC,MAAM,yBACNC,MAAO,MAETY,EAAAA,EAAAA,KAACnB,EAAQ,CACPG,MAAM,eACNC,MAAOvB,EAAe+C,OACtBvB,KAAK,eACLC,MAAM,wBACNC,MAAO,SAIXC,EAAAA,EAAAA,MAAA,OAAKG,UAAU,yBAAwBO,SAAA,EACrCC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,kBACqB,IAAxBzB,EAAamC,QACZpB,EAAAA,EAAAA,MAAA,OAAKG,UAAU,uBAAsBO,SAAA,EACnCC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,wCACHC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,wDAGLC,EAAAA,EAAAA,KAAA,OAAKR,UAAU,uBAAsBO,SAClCzB,EAAaoC,IAAI,CAAC5C,EAAO6C,KACxBtB,EAAAA,EAAAA,MAACC,EAAAA,EAAOC,IAAG,CAETC,UAAU,sBACVC,QAAS,CAAEC,QAAS,EAAGkB,GAAI,IAC3BhB,QAAS,CAAEF,QAAS,EAAGkB,EAAG,GAC1Bf,WAAY,CAAET,MAAO,GAAc,GAARuB,GAAcZ,SAAA,EAEzCV,EAAAA,EAAAA,MAAA,OAAKG,UAAU,wBAAuBO,SAAA,EACpCV,EAAAA,EAAAA,MAAA,QAAMG,UAAU,oBAAmBO,SAAA,CAAC,UAAQjC,EAAMF,OAClDoC,EAAAA,EAAAA,KAAA,QAAMR,UAAS,gCAAAW,OAAkCrC,EAAMO,QAAS0B,SAC7DjC,EAAMO,OAAOwC,QAAQ,IAAK,WAG/BxB,EAAAA,EAAAA,MAAA,OAAKG,UAAU,sBAAqBO,SAAA,EAClCV,EAAAA,EAAAA,MAAA,OAAKG,UAAU,yBAAwBO,SAAA,EACrCC,EAAAA,EAAAA,KAAA,UAAAD,SAASjC,EAAMgD,eACfzB,EAAAA,EAAAA,MAAA,QAAAU,SAAA,CAAM,QAAMjC,EAAMiD,gBAEpB1B,EAAAA,EAAAA,MAAA,OAAKG,UAAU,uBAAsBO,SAAA,EACnCV,EAAAA,EAAAA,MAAA,QAAAU,SAAA,CAAM,YAAU,IAAIrB,KAAKZ,EAAMa,WAAWqC,wBACzClD,EAAMmD,eACL5B,EAAAA,EAAAA,MAAA,QAAAU,SAAA,CAAM,aAAW,IAAIrB,KAAKZ,EAAMmD,cAAcD,2BAGjDlD,EAAMoD,cACL7B,EAAAA,EAAAA,MAAA,OAAKG,UAAU,wBAAuBO,SAAA,CAAC,WAC5BjC,EAAMoD,YAAYC,yBAzB5BrD,EAAMF,cAsC3B,GAAekB,EAAAA,EAAAA,MAAKxC,E","sources":["components/CustomerDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, memo } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ordersAPI } from '../services/api';\r\nimport './CustomerDashboard.css';\r\n\r\nconst CustomerDashboard = ({ orders = [] }) => {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(true);\r\n  const [stats, setStats] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, []);\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await ordersAPI.getDashboardStats();\r\n      setStats(response.data);\r\n    } catch (err) {\r\n      console.error('Error fetching stats:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter orders for this customer only\r\n  const customerOrders = useMemo(() => {\r\n    if (!user?.id) return orders;\r\n    // Filter orders where customer matches current user\r\n    // Note: This assumes orders have customer_id or customer information\r\n    return orders.filter(order => {\r\n      // If order has customer_id, match it\r\n      if (order.customer_id) {\r\n        return order.customer_id === user.id;\r\n      }\r\n      // Otherwise, match by customer name/email (fallback)\r\n      if (user.email && order.customerEmail) {\r\n        return order.customerEmail === user.email;\r\n      }\r\n      // For now, show all if we can't match (will be improved with backend filtering)\r\n      return true;\r\n    });\r\n  }, [orders, user]);\r\n\r\n  const statusCounts = useMemo(() => {\r\n    return customerOrders.reduce((acc, order) => {\r\n      acc[order.status] = (acc[order.status] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n  }, [customerOrders]);\r\n\r\n  const recentOrders = useMemo(() => {\r\n    return [...customerOrders]\r\n      .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n      .slice(0, 5);\r\n  }, [customerOrders]);\r\n\r\n  const StatCard = memo(({ title, value, icon, color, delay = 0 }) => (\r\n    <motion.div\r\n      className=\"customer-stat-card\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ delay, duration: 0.3 }}\r\n    >\r\n      <div className=\"customer-stat-icon\" style={{ background: `${color}20`, color }}>\r\n        {icon}\r\n      </div>\r\n      <div className=\"customer-stat-content\">\r\n        <p className=\"customer-stat-title\">{title}</p>\r\n        <h3 className=\"customer-stat-value\">{value}</h3>\r\n      </div>\r\n    </motion.div>\r\n  ));\r\n\r\n  if (loading) {\r\n    return <div className=\"customer-loading\">Loading your dashboard...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"customer-dashboard\">\r\n      <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        className=\"customer-dashboard-header\"\r\n      >\r\n        <h1>My Dashboard</h1>\r\n        <p>Welcome back, {user?.first_name || user?.username || 'Customer'}! Here's your order overview.</p>\r\n      </motion.div>\r\n\r\n      <div className=\"customer-stats-grid\">\r\n        <StatCard\r\n          title=\"My Active Orders\"\r\n          value={statusCounts.pending + (statusCounts['in-preparation'] || 0) + (statusCounts.ready || 0) || 0}\r\n          icon=\"ðŸ“¦\"\r\n          color=\"rgba(74, 144, 226, 1)\"\r\n          delay={0.1}\r\n        />\r\n        <StatCard\r\n          title=\"Pending Requests\"\r\n          value={statusCounts.pending || 0}\r\n          icon=\"â³\"\r\n          color=\"rgba(80, 201, 206, 1)\"\r\n          delay={0.2}\r\n        />\r\n        <StatCard\r\n          title=\"Completed Orders\"\r\n          value={statusCounts.delivered || 0}\r\n          icon=\"âœ…\"\r\n          color=\"rgba(107, 207, 127, 1)\"\r\n          delay={0.3}\r\n        />\r\n        <StatCard\r\n          title=\"Total Orders\"\r\n          value={customerOrders.length}\r\n          icon=\"ðŸ“Š\"\r\n          color=\"rgba(59, 130, 246, 1)\"\r\n          delay={0.4}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"customer-recent-orders\">\r\n        <h2>Recent Orders</h2>\r\n        {recentOrders.length === 0 ? (\r\n          <div className=\"customer-empty-state\">\r\n            <p>You haven't placed any orders yet.</p>\r\n            <p>Click \"New Request\" to create your first order!</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"customer-orders-list\">\r\n            {recentOrders.map((order, index) => (\r\n              <motion.div\r\n                key={order.id}\r\n                className=\"customer-order-card\"\r\n                initial={{ opacity: 0, x: -20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                transition={{ delay: 0.5 + index * 0.1 }}\r\n              >\r\n                <div className=\"customer-order-header\">\r\n                  <span className=\"customer-order-id\">Order #{order.id}</span>\r\n                  <span className={`customer-order-status status-${order.status}`}>\r\n                    {order.status.replace('-', ' ')}\r\n                  </span>\r\n                </div>\r\n                <div className=\"customer-order-body\">\r\n                  <div className=\"customer-order-product\">\r\n                    <strong>{order.productType}</strong>\r\n                    <span>Qty: {order.quantity}</span>\r\n                  </div>\r\n                  <div className=\"customer-order-dates\">\r\n                    <span>Ordered: {new Date(order.createdAt).toLocaleDateString()}</span>\r\n                    {order.deliveryDate && (\r\n                      <span>Delivery: {new Date(order.deliveryDate).toLocaleDateString()}</span>\r\n                    )}\r\n                  </div>\r\n                  {order.totalAmount && (\r\n                    <div className=\"customer-order-amount\">\r\n                      Total: ${order.totalAmount.toLocaleString()}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(CustomerDashboard);\r\n\r\n\r\n\r\n"],"names":["CustomerDashboard","_ref","orders","user","useAuth","loading","setLoading","useState","stats","setStats","useEffect","fetchStats","async","response","ordersAPI","getDashboardStats","data","err","console","error","customerOrders","useMemo","id","filter","order","customer_id","email","customerEmail","statusCounts","reduce","acc","status","recentOrders","sort","a","b","Date","createdAt","slice","StatCard","memo","_ref2","title","value","icon","color","delay","_jsxs","motion","div","className","initial","opacity","y","animate","transition","duration","children","_jsx","style","background","concat","first_name","username","pending","ready","delivered","length","map","index","x","replace","productType","quantity","toLocaleDateString","deliveryDate","totalAmount","toLocaleString"],"sourceRoot":""}