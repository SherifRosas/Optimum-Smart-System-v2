"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[869],{5869:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(9379),l=t(5043),r=t(9570),i=t(6446),n=t(579);const d=e=>{let{orders:a,onStatusUpdate:t}=e;const[d,c]=(0,l.useState)("all"),[o,u]=(0,l.useState)("createdAt"),[h,m]=(0,l.useState)("desc"),[p,v]=(0,l.useState)(""),[x,j]=(0,l.useState)(""),[N,g]=(0,l.useState)({start:"",end:""}),[b,y]=(0,l.useState)(1),[D,f]=(0,l.useState)(12),w={pending:"Pending","in-preparation":"In Preparation",ready:"Ready",delivered:"Delivered"};(0,l.useEffect)(()=>{const e=setTimeout(()=>{j(p),y(1)},300);return()=>clearTimeout(e)},[p]);const C=(0,l.useMemo)(()=>a.filter(e=>{var a,t,s,l;const r="all"===d||e.status===d,i=""===x||(null===(a=e.customerName)||void 0===a?void 0:a.toLowerCase().includes(x.toLowerCase()))||(null===(t=e.productType)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.phoneNumber)||void 0===s?void 0:s.includes(x))||(null===(l=e.id)||void 0===l?void 0:l.toString().includes(x)),n=(!N.start||new Date(e.createdAt)>=new Date(N.start))&&(!N.end||new Date(e.createdAt)<=new Date(N.end));return r&&i&&n}),[a,d,x,N]),S=(0,l.useMemo)(()=>[...C].sort((e,a)=>{let t=e[o],s=a[o];return"createdAt"!==o&&"deliveryDate"!==o||(t=new Date(t||0),s=new Date(s||0)),"totalAmount"!==o&&"quantity"!==o||(t=Number(t)||0,s=Number(s)||0),"asc"===h?t>s?1:-1:t<s?1:-1}),[C,o,h]),A=Math.ceil(S.length/D),P=(b-1)*D,F=P+D,T=S.slice(P,F),k=e=>{y(Math.max(1,Math.min(e,A))),window.scrollTo({top:0,behavior:"smooth"})},I=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,n.jsxs)("div",{className:"order-list",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h2",{children:"Order Management"}),(0,n.jsx)("p",{children:"Manage and track all customer orders"})]}),(0,n.jsxs)("div",{className:"filters-section",children:[(0,n.jsxs)("div",{className:"filter-group search-group",children:[(0,n.jsx)("label",{htmlFor:"searchInput",children:"Search:"}),(0,n.jsx)("input",{id:"searchInput",type:"text",placeholder:"Search by customer, product, phone, or order ID...",value:p,onChange:e=>v(e.target.value),className:"search-input"})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"statusFilter",children:"Filter by Status:"}),(0,n.jsx)("select",{id:"statusFilter",value:d,onChange:e=>c(e.target.value),className:"filter-select",children:[{value:"all",label:"All Orders"},{value:"pending",label:"Pending"},{value:"in-preparation",label:"In Preparation"},{value:"ready",label:"Ready"},{value:"delivered",label:"Delivered"}].map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"sortBy",children:"Sort by:"}),(0,n.jsxs)("select",{id:"sortBy",value:o,onChange:e=>{u(e.target.value),y(1)},className:"filter-select",children:[(0,n.jsx)("option",{value:"createdAt",children:"Date Created"}),(0,n.jsx)("option",{value:"deliveryDate",children:"Delivery Date"}),(0,n.jsx)("option",{value:"customerName",children:"Customer Name"}),(0,n.jsx)("option",{value:"productType",children:"Product Type"}),(0,n.jsx)("option",{value:"totalAmount",children:"Total Amount"}),(0,n.jsx)("option",{value:"quantity",children:"Quantity"})]})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"dateStart",children:"Date From:"}),(0,n.jsx)("input",{id:"dateStart",type:"date",value:N.start,onChange:e=>{g((0,s.A)((0,s.A)({},N),{},{start:e.target.value})),y(1)},className:"filter-select"})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"dateEnd",children:"Date To:"}),(0,n.jsx)("input",{id:"dateEnd",type:"date",value:N.end,onChange:e=>{g((0,s.A)((0,s.A)({},N),{},{end:e.target.value})),y(1)},className:"filter-select"})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"sortOrder",children:"Order:"}),(0,n.jsxs)("select",{id:"sortOrder",value:h,onChange:e=>m(e.target.value),className:"filter-select",children:[(0,n.jsx)("option",{value:"desc",children:"Newest First"}),(0,n.jsx)("option",{value:"asc",children:"Oldest First"})]})]}),(0,n.jsx)("div",{className:"filter-group",children:(0,n.jsx)("button",{onClick:()=>(e=>{if(0===e.length)return;const a=e.map(e=>[e.id,e.customerName||"",e.phoneNumber||"",e.productType||"",e.quantity||0,e.status||"",e.deliveryDate?new Date(e.deliveryDate).toLocaleDateString():"",e.createdAt?new Date(e.createdAt).toLocaleDateString():"",e.totalAmount||0]),t=[["ID","Customer Name","Phone","Product Type","Quantity","Status","Delivery Date","Created At","Total Amount"].join(","),...a.map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),r=URL.createObjectURL(s);l.setAttribute("href",r),l.setAttribute("download","orders_".concat((new Date).toISOString().split("T")[0],".csv")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)})(S),className:"export-btn",title:"Export orders to CSV",children:"\ud83d\udce5 Export to CSV"})})]}),(0,n.jsx)("div",{className:"orders-container",children:0===S.length?(0,n.jsx)("div",{className:"no-orders",children:(0,n.jsx)("p",{children:"No orders found matching your criteria."})}):(0,n.jsx)("div",{className:"orders-grid",children:(0,n.jsx)(r.N,{children:T.map((e,a)=>{return(0,n.jsxs)(i.P.div,{className:"order-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.05*a},children:[(0,n.jsxs)("div",{className:"order-header",children:[(0,n.jsxs)("div",{className:"order-id",children:["Order #",e.id]}),(0,n.jsx)("span",{className:(s=e.status,"status-badge status-".concat(s.replace("-","-"))),children:w[e.status]})]}),(0,n.jsxs)("div",{className:"order-details",children:[(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"label",children:"Customer:"}),(0,n.jsx)("span",{className:"value",children:e.customerName})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"label",children:"Phone:"}),(0,n.jsx)("span",{className:"value",children:e.phoneNumber})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"label",children:"Product:"}),(0,n.jsx)("span",{className:"value",children:e.productType})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"label",children:"Quantity:"}),(0,n.jsx)("span",{className:"value",children:e.quantity})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"label",children:"Delivery Date:"}),(0,n.jsx)("span",{className:"value",children:I(e.deliveryDate)})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"label",children:"Created:"}),(0,n.jsx)("span",{className:"value",children:I(e.createdAt)})]})]}),(0,n.jsx)("div",{className:"order-actions",children:(0,n.jsxs)("div",{className:"status-selector",children:[(0,n.jsx)("label",{htmlFor:"status-".concat(e.id),children:"Update Status:"}),(0,n.jsxs)("select",{id:"status-".concat(e.id),value:e.status,onChange:a=>{return s=e.id,l=a.target.value,void t(s,l);var s,l},className:"status-select",children:[(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"in-preparation",children:"In Preparation"}),(0,n.jsx)("option",{value:"ready",children:"Ready"}),(0,n.jsx)("option",{value:"delivered",children:"Delivered"})]})]})})]},e.id);var s})})})}),A>1&&(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsx)("button",{onClick:()=>k(b-1),disabled:1===b,className:"pagination-btn","aria-label":"Previous page",children:"Previous"}),(0,n.jsxs)("div",{className:"pagination-info",children:["Page ",b," of ",A]}),Array.from({length:Math.min(5,A)},(e,a)=>{let t;return t=A<=5||b<=3?a+1:b>=A-2?A-4+a:b-2+a,(0,n.jsx)("button",{onClick:()=>k(t),className:"pagination-btn ".concat(b===t?"active":""),"aria-label":"Go to page ".concat(t),children:t},t)}),(0,n.jsx)("button",{onClick:()=>k(b+1),disabled:b===A,className:"pagination-btn","aria-label":"Next page",children:"Next"})]}),(0,n.jsxs)("div",{className:"orders-summary",children:[(0,n.jsxs)("p",{children:["Showing ",P+1,"-",Math.min(F,S.length)," of ",S.length," orders","all"!==d||x||N.start||N.end?" (filtered)":""]}),(0,n.jsxs)("div",{className:"items-per-page",children:[(0,n.jsx)("label",{htmlFor:"itemsPerPage",children:"Items per page:"}),(0,n.jsxs)("select",{id:"itemsPerPage",value:D,onChange:e=>{f(Number(e.target.value)),y(1)},className:"filter-select",children:[(0,n.jsx)("option",{value:6,children:"6"}),(0,n.jsx)("option",{value:12,children:"12"}),(0,n.jsx)("option",{value:24,children:"24"}),(0,n.jsx)("option",{value:48,children:"48"})]})]})]})]})},c=(0,l.memo)(d)}}]);
//# sourceMappingURL=869.80e5d6d9.chunk.js.map