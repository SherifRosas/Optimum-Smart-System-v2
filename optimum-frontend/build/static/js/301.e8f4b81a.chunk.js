"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[301],{5301:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var a=r(9379),s=r(5043),n=r(6446),i=r(5016),o=r(4505),l=r(8254),c=r(9930),d=r(579);const u=e=>{let{onSubmit:t}=e;const{user:r}=(0,i.A)(),u=(0,l.d)(),[p,y]=(0,s.useState)({productType:"",quantity:"",deliveryDate:"",notes:""}),[m,h]=(0,s.useState)({}),[v,x]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),q=e=>{const{name:t,value:r}=e.target;y(e=>(0,a.A)((0,a.A)({},e),{},{[t]:r})),m[t]&&h(e=>(0,a.A)((0,a.A)({},e),{},{[t]:""}))};return(0,d.jsx)("div",{className:"new-order-request",children:(0,d.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"order-request-container",children:[(0,d.jsxs)("div",{className:"order-request-header",children:[(0,d.jsx)("h1",{children:"New Order Request"}),(0,d.jsx)("p",{children:"Request a product order. Our team will process your request and assign a supplier."})]}),(0,d.jsxs)("div",{className:"ai-fill-section",children:[(0,d.jsx)("button",{type:"button",onClick:async()=>{const e=prompt('Describe your order in natural language:\n\nExample: "I need 3 Dell laptops for customer John Smith, phone +1234567890, delivery by next Monday"');if(e&&e.trim()){j(!0);try{const t=(await o.f3.analyzeOrderText(e)).data.analysis;t&&(y(r=>(0,a.A)((0,a.A)({},r),{},{productType:t.product_type||r.productType,quantity:t.quantity||r.quantity,deliveryDate:t.delivery_date||r.deliveryDate,notes:e})),u.success("Form filled successfully!"))}catch(t){u.error("AI Fill failed. Please fill the form manually.")}finally{j(!1)}}},disabled:f,className:"ai-fill-button",children:f?"Processing...":"\u2728 Use AI Fill (Natural Language)"}),(0,d.jsx)("p",{className:"ai-fill-hint",children:"Describe your order in plain text and let AI fill the form for you!"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(p.productType.trim()||(e.productType="Product type is required"),(!p.quantity||parseInt(p.quantity)<1)&&(e.quantity="Quantity must be at least 1"),p.deliveryDate){const t=new Date(p.deliveryDate),r=new Date;r.setHours(0,0,0,0),t<r&&(e.deliveryDate="Delivery date cannot be in the past")}else e.deliveryDate="Delivery date is required";return h(e),0===Object.keys(e).length})()){x(!0);try{const e={customer:{name:null!==r&&void 0!==r&&r.first_name&&null!==r&&void 0!==r&&r.last_name?"".concat(r.first_name," ").concat(r.last_name):(null===r||void 0===r?void 0:r.username)||"Customer",phone_number:(null===r||void 0===r?void 0:r.phone_number)||(null===r||void 0===r?void 0:r.phone)||""},product_type:p.productType.trim(),quantity:parseInt(p.quantity),delivery_date:p.deliveryDate,notes:p.notes||""};t?await t(e):(await o.gH.createOrder(e),u.success("Order request created successfully!")),y({productType:"",quantity:"",deliveryDate:"",notes:""})}catch(a){u.error("Failed to create order request. Please try again."),console.error("Error creating order:",a)}finally{x(!1)}}else u.error("Please fix the errors in the form")},className:"order-request-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{htmlFor:"productType",children:["Product Type *",(0,d.jsx)(c.A,{content:"Enter the type of product you need (e.g., Laptop Dell XPS 15, iPhone 15, etc.)",children:(0,d.jsx)("span",{className:"tooltip-icon",children:"\u2139\ufe0f"})})]}),(0,d.jsx)("input",{type:"text",id:"productType",name:"productType",value:p.productType,onChange:q,className:m.productType?"error":"",placeholder:"e.g., Laptop Dell XPS 15",required:!0}),m.productType&&(0,d.jsx)("span",{className:"error-message",children:m.productType})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{htmlFor:"quantity",children:["Quantity *",(0,d.jsx)(c.A,{content:"Enter the number of items you need",children:(0,d.jsx)("span",{className:"tooltip-icon",children:"\u2139\ufe0f"})})]}),(0,d.jsx)("input",{type:"number",id:"quantity",name:"quantity",value:p.quantity,onChange:q,className:m.quantity?"error":"",placeholder:"e.g., 5",min:"1",required:!0}),m.quantity&&(0,d.jsx)("span",{className:"error-message",children:m.quantity})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{htmlFor:"deliveryDate",children:["Delivery Date *",(0,d.jsx)(c.A,{content:"Select when you need the products delivered",children:(0,d.jsx)("span",{className:"tooltip-icon",children:"\u2139\ufe0f"})})]}),(0,d.jsx)("input",{type:"date",id:"deliveryDate",name:"deliveryDate",value:p.deliveryDate,onChange:q,className:m.deliveryDate?"error":"",min:(new Date).toISOString().split("T")[0],required:!0}),m.deliveryDate&&(0,d.jsx)("span",{className:"error-message",children:m.deliveryDate})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{htmlFor:"notes",children:["Additional Notes",(0,d.jsx)(c.A,{content:"Any special requirements or notes about your order",children:(0,d.jsx)("span",{className:"tooltip-icon",children:"\u2139\ufe0f"})})]}),(0,d.jsx)("textarea",{id:"notes",name:"notes",value:p.notes,onChange:q,placeholder:"Any special requirements, specifications, or notes...",rows:"4"})]}),(0,d.jsx)("div",{className:"form-actions",children:(0,d.jsx)("button",{type:"submit",className:"submit-button",disabled:v,children:v?"Submitting...":"Submit Order Request"})})]})]})})}},9930:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(5043),s=r(9570),n=r(6446),i=r(579);const o=e=>{let{children:t,content:r,position:o="top",delay:l=200}=e;const[c,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),y=()=>{const e=setTimeout(()=>d(!0),l);p(e)},m=()=>{u&&(clearTimeout(u),p(null)),d(!1)};return(0,i.jsxs)("div",{className:"tooltip-wrapper",onMouseEnter:y,onMouseLeave:m,onFocus:y,onBlur:m,children:[t,(0,i.jsx)(s.N,{children:c&&r&&(0,i.jsxs)(n.P.div,{className:"tooltip tooltip-".concat(o),initial:{opacity:0,scale:.8,y:"bottom"===o?-10:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:"bottom"===o?-10:10},transition:{duration:.2},children:[r,(0,i.jsx)("span",{className:"tooltip-arrow tooltip-arrow-".concat(o)})]})})]})}}}]);
//# sourceMappingURL=301.e8f4b81a.chunk.js.map