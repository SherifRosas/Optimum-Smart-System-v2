{"version":3,"file":"static/js/545.854abda0.chunk.js","mappings":"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","sources":["components/SupplierOrders.js"],"sourcesContent":["import React, { useState, useMemo, memo } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { ordersAPI } from '../services/api';\r\nimport { useToast } from '../hooks/useToast';\r\nimport './SupplierOrders.css';\r\n\r\nconst SupplierOrders = ({ orders = [], onStatusUpdate }) => {\r\n  const { user } = useAuth();\r\n  const toast = useToast();\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [debouncedSearch, setDebouncedSearch] = useState('');\r\n\r\n  // Debounce search\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearch(searchQuery);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchQuery]);\r\n\r\n  // Filter orders assigned to this supplier\r\n  const supplierOrders = useMemo(() => {\r\n    if (!user?.id) return [];\r\n    return orders.filter(order => {\r\n      if (order.supplier_id) {\r\n        return order.supplier_id === user.id;\r\n      }\r\n      // Fallback matching\r\n      return true;\r\n    });\r\n  }, [orders, user]);\r\n\r\n  const filteredOrders = useMemo(() => {\r\n    return supplierOrders.filter(order => {\r\n      const matchesStatus = filterStatus === 'all' || order.status === filterStatus;\r\n      const matchesSearch = debouncedSearch === '' || \r\n        order.productType?.toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n        order.customerName?.toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n        order.id?.toString().includes(debouncedSearch);\r\n      return matchesStatus && matchesSearch;\r\n    });\r\n  }, [supplierOrders, filterStatus, debouncedSearch]);\r\n\r\n  const handleStatusUpdate = async (orderId, newStatus) => {\r\n    try {\r\n      await ordersAPI.updateOrderStatus(orderId, newStatus);\r\n      if (onStatusUpdate) {\r\n        onStatusUpdate(orderId, newStatus);\r\n      }\r\n      toast.success(`Order status updated to ${newStatus}`);\r\n    } catch (error) {\r\n      toast.error('Failed to update order status');\r\n    }\r\n  };\r\n\r\n  const statusOptions = [\r\n    { value: 'all', label: 'All Orders' },\r\n    { value: 'in-preparation', label: 'In Preparation' },\r\n    { value: 'ready', label: 'Ready' },\r\n    { value: 'delivered', label: 'Delivered' }\r\n  ];\r\n\r\n  const getStatusClass = (status) => {\r\n    return `supplier-order-status status-${status}`;\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    return status.replace('-', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\r\n  };\r\n\r\n  return (\r\n    <div className=\"supplier-orders\">\r\n      <div className=\"supplier-orders-header\">\r\n        <h1>My Assigned Orders</h1>\r\n        <p>Manage orders assigned to you. Update status as you progress.</p>\r\n      </div>\r\n\r\n      <div className=\"supplier-orders-filters\">\r\n        <div className=\"supplier-search-box\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by product, customer, or order ID...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"supplier-search-input\"\r\n          />\r\n        </div>\r\n        <div className=\"supplier-filter-group\">\r\n          <label>Filter by Status:</label>\r\n          <select\r\n            value={filterStatus}\r\n            onChange={(e) => setFilterStatus(e.target.value)}\r\n            className=\"supplier-filter-select\"\r\n          >\r\n            {statusOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"supplier-orders-content\">\r\n        {filteredOrders.length === 0 ? (\r\n          <div className=\"supplier-empty-state\">\r\n            <p>No orders assigned to you.</p>\r\n            {supplierOrders.length === 0 && (\r\n              <p>Check \"Order Requests\" to see incoming requests and accept orders!</p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"supplier-orders-grid\">\r\n            {filteredOrders.map((order, index) => (\r\n              <motion.div\r\n                key={order.id}\r\n                className=\"supplier-order-item\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: index * 0.05 }}\r\n              >\r\n                <div className=\"supplier-order-item-header\">\r\n                  <span className=\"supplier-order-item-id\">Order #{order.id}</span>\r\n                  <span className={getStatusClass(order.status)}>\r\n                    {getStatusLabel(order.status)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"supplier-order-item-body\">\r\n                  <div className=\"supplier-order-item-product\">\r\n                    <strong>{order.productType || 'Unknown Product'}</strong>\r\n                    <span>Quantity: {order.quantity}</span>\r\n                  </div>\r\n                  <div className=\"supplier-order-item-customer\">\r\n                    <span>Customer: {order.customerName || 'N/A'}</span>\r\n                  </div>\r\n                  <div className=\"supplier-order-item-info\">\r\n                    <div className=\"supplier-order-item-row\">\r\n                      <span className=\"label\">Assigned:</span>\r\n                      <span className=\"value\">\r\n                        {new Date(order.createdAt).toLocaleDateString()}\r\n                      </span>\r\n                    </div>\r\n                    {order.deliveryDate && (\r\n                      <div className=\"supplier-order-item-row\">\r\n                        <span className=\"label\">Delivery Date:</span>\r\n                        <span className=\"value\">\r\n                          {new Date(order.deliveryDate).toLocaleDateString()}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    {order.totalAmount && (\r\n                      <div className=\"supplier-order-item-row\">\r\n                        <span className=\"label\">Amount:</span>\r\n                        <span className=\"value amount\">\r\n                          ${order.totalAmount.toLocaleString()}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"supplier-order-item-actions\">\r\n                  {order.status === 'pending' && (\r\n                    <button\r\n                      className=\"status-update-btn\"\r\n                      onClick={() => handleStatusUpdate(order.id, 'in-preparation')}\r\n                    >\r\n                      Start Preparation\r\n                    </button>\r\n                  )}\r\n                  {order.status === 'in-preparation' && (\r\n                    <button\r\n                      className=\"status-update-btn\"\r\n                      onClick={() => handleStatusUpdate(order.id, 'ready')}\r\n                    >\r\n                      Mark as Ready\r\n                    </button>\r\n                  )}\r\n                  {order.status === 'ready' && (\r\n                    <button\r\n                      className=\"status-update-btn delivered\"\r\n                      onClick={() => handleStatusUpdate(order.id, 'delivered')}\r\n                    >\r\n                      Mark as Delivered\r\n                    </button>\r\n                  )}\r\n                  {order.status === 'delivered' && (\r\n                    <span className=\"status-complete\">âœ“ Delivered</span>\r\n                  )}\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(SupplierOrders);\r\n\r\n\r\n\r\n"],"names":["SupplierOrders","_ref","orders","onStatusUpdate","user","useAuth","toast","useToast","filterStatus","setFilterStatus","useState","searchQuery","setSearchQuery","debouncedSearch","setDebouncedSearch","React","timer","setTimeout","clearTimeout","supplierOrders","useMemo","id","filter","order","supplier_id","filteredOrders","_order$productType","_order$customerName","_order$id","matchesStatus","status","matchesSearch","productType","toLowerCase","includes","customerName","toString","handleStatusUpdate","async","orderId","newStatus","ordersAPI","updateOrderStatus","success","concat","error","getStatusLabel","replace","l","toUpperCase","_jsxs","className","children","_jsx","type","placeholder","value","onChange","e","target","label","map","option","length","index","motion","div","initial","opacity","y","animate","transition","delay","quantity","Date","createdAt","toLocaleDateString","deliveryDate","totalAmount","toLocaleString","onClick","memo"],"sourceRoot":""}