"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[995],{6995:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var r=t(5043),a=t(6446),c=t(5016),i=t(4505),o=t(579);const d=e=>{let{orders:s=[]}=e;const{user:t}=(0,c.A)(),[d,l]=(0,r.useState)(!0),[n,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await i.gH.getDashboardStats();u(e.data)}catch(e){console.error("Error fetching stats:",e)}finally{l(!1)}},h=(0,r.useMemo)(()=>null!==t&&void 0!==t&&t.id?s.filter(e=>e.customer_id?e.customer_id===t.id:!t.email||!e.customerEmail||e.customerEmail===t.email):s,[s,t]),v=(0,r.useMemo)(()=>h.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{}),[h]),x=(0,r.useMemo)(()=>[...h].sort((e,s)=>new Date(s.createdAt)-new Date(e.createdAt)).slice(0,5),[h]),y=(0,r.memo)(e=>{let{title:s,value:t,icon:r,color:c,delay:i=0}=e;return(0,o.jsxs)(a.P.div,{className:"customer-stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i,duration:.3},children:[(0,o.jsx)("div",{className:"customer-stat-icon",style:{background:"".concat(c,"20"),color:c},children:r}),(0,o.jsxs)("div",{className:"customer-stat-content",children:[(0,o.jsx)("p",{className:"customer-stat-title",children:s}),(0,o.jsx)("h3",{className:"customer-stat-value",children:t})]})]})});return d?(0,o.jsx)("div",{className:"customer-loading",children:"Loading your dashboard..."}):(0,o.jsxs)("div",{className:"customer-dashboard",children:[(0,o.jsxs)(a.P.div,{initial:{opacity:0},animate:{opacity:1},className:"customer-dashboard-header",children:[(0,o.jsx)("h1",{children:"My Dashboard"}),(0,o.jsxs)("p",{children:["Welcome back, ",(null===t||void 0===t?void 0:t.first_name)||(null===t||void 0===t?void 0:t.username)||"Customer","! Here's your order overview."]})]}),(0,o.jsxs)("div",{className:"customer-stats-grid",children:[(0,o.jsx)(y,{title:"My Active Orders",value:v.pending+(v["in-preparation"]||0)+(v.ready||0)||0,icon:"\ud83d\udce6",color:"rgba(74, 144, 226, 1)",delay:.1}),(0,o.jsx)(y,{title:"Pending Requests",value:v.pending||0,icon:"\u23f3",color:"rgba(80, 201, 206, 1)",delay:.2}),(0,o.jsx)(y,{title:"Completed Orders",value:v.delivered||0,icon:"\u2705",color:"rgba(107, 207, 127, 1)",delay:.3}),(0,o.jsx)(y,{title:"Total Orders",value:h.length,icon:"\ud83d\udcca",color:"rgba(59, 130, 246, 1)",delay:.4})]}),(0,o.jsxs)("div",{className:"customer-recent-orders",children:[(0,o.jsx)("h2",{children:"Recent Orders"}),0===x.length?(0,o.jsxs)("div",{className:"customer-empty-state",children:[(0,o.jsx)("p",{children:"You haven't placed any orders yet."}),(0,o.jsx)("p",{children:'Click "New Request" to create your first order!'})]}):(0,o.jsx)("div",{className:"customer-orders-list",children:x.map((e,s)=>(0,o.jsxs)(a.P.div,{className:"customer-order-card",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*s},children:[(0,o.jsxs)("div",{className:"customer-order-header",children:[(0,o.jsxs)("span",{className:"customer-order-id",children:["Order #",e.id]}),(0,o.jsx)("span",{className:"customer-order-status status-".concat(e.status),children:e.status.replace("-"," ")})]}),(0,o.jsxs)("div",{className:"customer-order-body",children:[(0,o.jsxs)("div",{className:"customer-order-product",children:[(0,o.jsx)("strong",{children:e.productType}),(0,o.jsxs)("span",{children:["Qty: ",e.quantity]})]}),(0,o.jsxs)("div",{className:"customer-order-dates",children:[(0,o.jsxs)("span",{children:["Ordered: ",new Date(e.createdAt).toLocaleDateString()]}),e.deliveryDate&&(0,o.jsxs)("span",{children:["Delivery: ",new Date(e.deliveryDate).toLocaleDateString()]})]}),e.totalAmount&&(0,o.jsxs)("div",{className:"customer-order-amount",children:["Total: $",e.totalAmount.toLocaleString()]})]})]},e.id))})]})]})},l=(0,r.memo)(d)}}]);
//# sourceMappingURL=995.6dfcda3d.chunk.js.map