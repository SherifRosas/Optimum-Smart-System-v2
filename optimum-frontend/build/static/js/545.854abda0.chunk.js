"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[545],{2545:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var r=a(5043),t=a(6446),l=a(5016),i=a(4505),d=a(8254),n=a(579);const c=e=>{let{orders:s=[],onStatusUpdate:a}=e;const{user:c}=(0,l.A)(),o=(0,d.d)(),[u,p]=(0,r.useState)("all"),[m,h]=(0,r.useState)(""),[v,x]=(0,r.useState)("");r.useEffect(()=>{const e=setTimeout(()=>{x(m)},300);return()=>clearTimeout(e)},[m]);const j=(0,r.useMemo)(()=>null!==c&&void 0!==c&&c.id?s.filter(e=>!e.supplier_id||e.supplier_id===c.id):[],[s,c]),N=(0,r.useMemo)(()=>j.filter(e=>{var s,a,r;const t="all"===u||e.status===u,l=""===v||(null===(s=e.productType)||void 0===s?void 0:s.toLowerCase().includes(v.toLowerCase()))||(null===(a=e.customerName)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase()))||(null===(r=e.id)||void 0===r?void 0:r.toString().includes(v));return t&&l}),[j,u,v]),y=async(e,s)=>{try{await i.gH.updateOrderStatus(e,s),a&&a(e,s),o.success("Order status updated to ".concat(s))}catch(r){o.error("Failed to update order status")}},g=e=>e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase());return(0,n.jsxs)("div",{className:"supplier-orders",children:[(0,n.jsxs)("div",{className:"supplier-orders-header",children:[(0,n.jsx)("h1",{children:"My Assigned Orders"}),(0,n.jsx)("p",{children:"Manage orders assigned to you. Update status as you progress."})]}),(0,n.jsxs)("div",{className:"supplier-orders-filters",children:[(0,n.jsx)("div",{className:"supplier-search-box",children:(0,n.jsx)("input",{type:"text",placeholder:"Search by product, customer, or order ID...",value:m,onChange:e=>h(e.target.value),className:"supplier-search-input"})}),(0,n.jsxs)("div",{className:"supplier-filter-group",children:[(0,n.jsx)("label",{children:"Filter by Status:"}),(0,n.jsx)("select",{value:u,onChange:e=>p(e.target.value),className:"supplier-filter-select",children:[{value:"all",label:"All Orders"},{value:"in-preparation",label:"In Preparation"},{value:"ready",label:"Ready"},{value:"delivered",label:"Delivered"}].map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,n.jsx)("div",{className:"supplier-orders-content",children:0===N.length?(0,n.jsxs)("div",{className:"supplier-empty-state",children:[(0,n.jsx)("p",{children:"No orders assigned to you."}),0===j.length&&(0,n.jsx)("p",{children:'Check "Order Requests" to see incoming requests and accept orders!'})]}):(0,n.jsx)("div",{className:"supplier-orders-grid",children:N.map((e,s)=>{return(0,n.jsxs)(t.P.div,{className:"supplier-order-item",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},children:[(0,n.jsxs)("div",{className:"supplier-order-item-header",children:[(0,n.jsxs)("span",{className:"supplier-order-item-id",children:["Order #",e.id]}),(0,n.jsx)("span",{className:(a=e.status,"supplier-order-status status-".concat(a)),children:g(e.status)})]}),(0,n.jsxs)("div",{className:"supplier-order-item-body",children:[(0,n.jsxs)("div",{className:"supplier-order-item-product",children:[(0,n.jsx)("strong",{children:e.productType||"Unknown Product"}),(0,n.jsxs)("span",{children:["Quantity: ",e.quantity]})]}),(0,n.jsx)("div",{className:"supplier-order-item-customer",children:(0,n.jsxs)("span",{children:["Customer: ",e.customerName||"N/A"]})}),(0,n.jsxs)("div",{className:"supplier-order-item-info",children:[(0,n.jsxs)("div",{className:"supplier-order-item-row",children:[(0,n.jsx)("span",{className:"label",children:"Assigned:"}),(0,n.jsx)("span",{className:"value",children:new Date(e.createdAt).toLocaleDateString()})]}),e.deliveryDate&&(0,n.jsxs)("div",{className:"supplier-order-item-row",children:[(0,n.jsx)("span",{className:"label",children:"Delivery Date:"}),(0,n.jsx)("span",{className:"value",children:new Date(e.deliveryDate).toLocaleDateString()})]}),e.totalAmount&&(0,n.jsxs)("div",{className:"supplier-order-item-row",children:[(0,n.jsx)("span",{className:"label",children:"Amount:"}),(0,n.jsxs)("span",{className:"value amount",children:["$",e.totalAmount.toLocaleString()]})]})]})]}),(0,n.jsxs)("div",{className:"supplier-order-item-actions",children:["pending"===e.status&&(0,n.jsx)("button",{className:"status-update-btn",onClick:()=>y(e.id,"in-preparation"),children:"Start Preparation"}),"in-preparation"===e.status&&(0,n.jsx)("button",{className:"status-update-btn",onClick:()=>y(e.id,"ready"),children:"Mark as Ready"}),"ready"===e.status&&(0,n.jsx)("button",{className:"status-update-btn delivered",onClick:()=>y(e.id,"delivered"),children:"Mark as Delivered"}),"delivered"===e.status&&(0,n.jsx)("span",{className:"status-complete",children:"\u2713 Delivered"})]})]},e.id);var a})})})]})},o=(0,r.memo)(c)}}]);
//# sourceMappingURL=545.854abda0.chunk.js.map