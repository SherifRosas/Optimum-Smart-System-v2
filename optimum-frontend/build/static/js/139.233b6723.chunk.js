"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[139],{3139:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var a=i(9379),n=i(5043),t=i(579);const r=e=>{var s;let{orders:i}=e;const[r,d]=(0,n.useState)(null),[l,c]=(0,n.useState)({}),[o,m]=(0,n.useState)(""),[p,h]=(0,n.useState)(!1),u=[{id:1,name:"Tech Solutions Ltd",email:"orders@techsolutions.com",phone:"+20 100 111 2222",rating:4.8},{id:2,name:"Electronics Hub",email:"contact@electronicshub.com",phone:"+20 100 333 4444",rating:4.5},{id:3,name:"Digital World",email:"sales@digitalworld.com",phone:"+20 100 555 6666",rating:4.2}],g=e=>e.productType&&e.productType.toLowerCase().includes("laptop")?u[0]:e.productType&&e.productType.toLowerCase().includes("iphone")?u[1]:u[2],x=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j={pending:"Pending","in-preparation":"In Preparation",ready:"Ready",delivered:"Delivered"};return(0,t.jsxs)("div",{className:"supplier-communication",children:[(0,t.jsxs)("div",{className:"page-header",children:[(0,t.jsx)("h2",{children:"Supplier Communication"}),(0,t.jsx)("p",{children:"Communicate with suppliers about orders"})]}),(0,t.jsxs)("div",{className:"communication-layout",children:[(0,t.jsxs)("div",{className:"orders-panel",children:[(0,t.jsxs)("div",{className:"panel-header",children:[(0,t.jsx)("h3",{children:"Orders"}),(0,t.jsxs)("span",{className:"order-count",children:[i.length," orders"]})]}),(0,t.jsx)("div",{className:"orders-list",children:0===i.length?(0,t.jsx)("div",{className:"no-orders",children:(0,t.jsx)("p",{children:"No orders available"})}):i.map(e=>{const s=g(e),i=l[e.id]||[],n=i[i.length-1];return(0,t.jsxs)("div",{className:"order-item ".concat((null===r||void 0===r?void 0:r.id)===e.id?"selected":""),onClick:()=>(e=>{d(e),l[e.id]||c(s=>(0,a.A)((0,a.A)({},s),{},{[e.id]:[{id:1,type:"system",message:"Order #".concat(e.id," has been sent to ").concat(g(e).name),timestamp:(new Date).toISOString()}]}))})(e),children:[(0,t.jsxs)("div",{className:"order-header",children:[(0,t.jsxs)("div",{className:"order-id",children:["Order #",e.id]}),(0,t.jsx)("span",{className:(o=e.status,"status-badge status-".concat(o.replace("-","-"))),children:j[e.status]})]}),(0,t.jsxs)("div",{className:"order-details",children:[(0,t.jsx)("div",{className:"customer-name",children:e.customerName}),(0,t.jsx)("div",{className:"product-type",children:e.productType}),(0,t.jsxs)("div",{className:"supplier-info",children:[(0,t.jsx)("span",{className:"supplier-name",children:s.name}),(0,t.jsxs)("span",{className:"supplier-rating",children:["\u2b50 ",s.rating]})]})]}),n&&(0,t.jsxs)("div",{className:"last-message",children:[(0,t.jsxs)("span",{className:"message-preview",children:["system"===n.type?"System: ":"outgoing"===n.type?"You: ":"Supplier: ",n.message.substring(0,50),n.message.length>50?"...":""]}),(0,t.jsx)("span",{className:"message-time",children:x(n.timestamp)})]})]},e.id);var o})})]}),(0,t.jsx)("div",{className:"chat-panel",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"chat-header",children:[(0,t.jsxs)("div",{className:"chat-order-info",children:[(0,t.jsxs)("h3",{children:["Order #",r.id]}),(0,t.jsxs)("p",{children:[r.customerName," - ",r.productType]})]}),(0,t.jsxs)("div",{className:"supplier-info",children:[(0,t.jsx)("div",{className:"supplier-name",children:g(r).name}),(0,t.jsxs)("div",{className:"supplier-contact",children:[(0,t.jsx)("span",{children:g(r).email}),(0,t.jsx)("span",{children:g(r).phone})]})]})]}),(0,t.jsx)("div",{className:"messages-container",children:null===(s=l[r.id])||void 0===s?void 0:s.map(e=>(0,t.jsx)("div",{className:"message ".concat(e.type),children:(0,t.jsxs)("div",{className:"message-content",children:[(0,t.jsx)("div",{className:"message-text",children:e.message}),(0,t.jsx)("div",{className:"message-time",children:x(e.timestamp)})]})},e.id))}),(0,t.jsx)("div",{className:"message-input",children:(0,t.jsxs)("div",{className:"input-container",children:[(0,t.jsx)("textarea",{value:o,onChange:e=>m(e.target.value),placeholder:"Type your message to the supplier...",rows:"3",disabled:p}),(0,t.jsx)("button",{onClick:async()=>{if(o.trim()&&r){h(!0);try{await new Promise(e=>{window.requestIdleCallback?window.requestIdleCallback(()=>e(),{timeout:1e3}):setTimeout(e,1e3)});const e={id:Date.now(),type:"outgoing",message:o.trim(),timestamp:(new Date).toISOString()};c(s=>(0,a.A)((0,a.A)({},s),{},{[r.id]:[...s[r.id]||[],e]})),m("");(()=>{window.requestIdleCallback?window.requestIdleCallback(()=>{const e={id:Date.now()+1,type:"incoming",message:"Thank you for your order. We will process it within 24 hours.",timestamp:(new Date).toISOString()};c(s=>(0,a.A)((0,a.A)({},s),{},{[r.id]:[...s[r.id]||[],e]}))},{timeout:2e3}):setTimeout(()=>{const e={id:Date.now()+1,type:"incoming",message:"Thank you for your order. We will process it within 24 hours.",timestamp:(new Date).toISOString()};c(s=>(0,a.A)((0,a.A)({},s),{},{[r.id]:[...s[r.id]||[],e]}))},2e3)})()}catch(e){console.error("Error sending message:",e)}finally{h(!1)}}},disabled:!o.trim()||p,className:"send-button","aria-label":p?"Sending message":"Send message to supplier",title:p?"Sending message":"Send message to supplier",children:p?"Sending...":"Send"})]})})]}):(0,t.jsx)("div",{className:"no-selection",children:(0,t.jsxs)("div",{className:"no-selection-content",children:[(0,t.jsx)("div",{className:"no-selection-icon",children:"\ud83d\udcac"}),(0,t.jsx)("h3",{children:"Select an Order"}),(0,t.jsx)("p",{children:"Choose an order from the list to start communicating with the supplier"})]})})})]})]})},d=(0,n.memo)(r)}}]);
//# sourceMappingURL=139.233b6723.chunk.js.map