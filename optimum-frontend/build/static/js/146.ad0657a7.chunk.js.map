{"version":3,"file":"static/js/146.ad0657a7.chunk.js","mappings":"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","sources":["components/AIChatWidget.js"],"sourcesContent":["import React, { useState, useEffect, useRef, memo } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { HiX, HiPaperAirplane, HiSparkles, HiChip } from 'react-icons/hi';\r\nimport { aiAPI } from '../services/api';\r\nimport './AIChatWidget.css';\r\n\r\n// Fallback responses for common questions when backend is unavailable\r\nconst getFallbackResponse = (message) => {\r\n  const lowerMessage = message.toLowerCase();\r\n  \r\n  // Order creation questions\r\n  if (lowerMessage.includes('create') && (lowerMessage.includes('order') || lowerMessage.includes('new order'))) {\r\n    return `**How to create a new order:**\r\n\r\n1. **Click \"New Order\"** in the navigation menu (or press keyboard shortcut **2**)\r\n2. **Fill in the order form:**\r\n   - **Customer Name** (required)\r\n   - **Phone Number** (required)\r\n   - **Product Type** (required) - e.g., \"Laptop Dell XPS 15\"\r\n   - **Quantity** (required)\r\n   - **Delivery Date** (required)\r\n\r\n3. **Optional: Use AI Fill**\r\n   - Click \"Use AI Fill (Natural Language)\"\r\n   - Type your order in plain text, e.g., \"John Smith needs 2 laptops for next Friday\"\r\n   - Click \"AI Fill Form\" to auto-populate the form\r\n\r\n4. **Click \"Create Order\"** to submit\r\n\r\nThe order will be created and appear in your Orders list!`;\r\n  }\r\n  \r\n  // Navigation questions\r\n  if (lowerMessage.includes('navigate') || lowerMessage.includes('go to') || lowerMessage.includes('where')) {\r\n    return `**Navigation Guide:**\r\n\r\n- **Dashboard** (Shortcut: 1) - View statistics and analytics\r\n- **New Order** (Shortcut: 2) - Create a new customer order\r\n- **Orders** (Shortcut: 3) - View and manage all orders\r\n- **Suppliers** (Shortcut: 4) - Communicate with suppliers\r\n- **Accounting** (Shortcut: 5) - View financial reports\r\n- **AI Insights** (Shortcut: 6) - AI-powered analytics\r\n- **AI Chat** (Shortcut: 7) - Chat with AI assistant\r\n\r\nYou can use keyboard shortcuts (1-7) or click the menu items!`;\r\n  }\r\n  \r\n  // Order management questions\r\n  if (lowerMessage.includes('order') && (lowerMessage.includes('manage') || lowerMessage.includes('view') || lowerMessage.includes('list'))) {\r\n    return `**Order Management:**\r\n\r\n1. **View Orders:** Click \"Orders\" in navigation (Shortcut: 3)\r\n2. **Filter Orders:** Use the status filter dropdown\r\n3. **Search Orders:** Type in the search box\r\n4. **Update Status:** Click on an order card, then use the status dropdown\r\n5. **Export Data:** Click \"Export to CSV\" button\r\n\r\nOrder statuses: Pending â†’ In Preparation â†’ Ready â†’ Delivered`;\r\n  }\r\n  \r\n  // General help\r\n  if (lowerMessage.includes('help') || lowerMessage.includes('how') || lowerMessage.includes('what')) {\r\n    return `**I can help you with:**\r\n\r\nâœ… Creating new orders\r\nâœ… Managing existing orders\r\nâœ… Navigating the system\r\nâœ… Understanding features\r\nâœ… Order status updates\r\nâœ… Supplier communication\r\nâœ… Accounting and reports\r\nâœ… AI insights and analytics\r\n\r\n**Quick Tips:**\r\n- Use keyboard shortcuts (1-7) for fast navigation\r\n- Try AI Fill for natural language order entry\r\n- Check the Dashboard for real-time statistics\r\n- Use filters and search to find specific orders\r\n\r\nWhat would you like to know more about?`;\r\n  }\r\n  \r\n  // Default fallback\r\n  return `Sorry, I'm having trouble connecting to the AI service right now. \r\n\r\n**But I can still help!** Here are some quick answers:\r\n\r\nðŸ“ **Create Order:** Click \"New Order\" (Shortcut: 2) and fill in the form\r\nðŸ“‹ **View Orders:** Click \"Orders\" (Shortcut: 3)\r\nðŸ“Š **Dashboard:** Click \"Dashboard\" (Shortcut: 1)\r\nðŸ¤– **AI Features:** Click \"AI Insights\" (Shortcut: 6)\r\n\r\nTry asking: \"How do I create a new order?\" or \"How do I navigate?\"`;\r\n};\r\n\r\nconst AIChatWidget = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true);\r\n    return () => setIsMounted(false);\r\n  }, []);\r\n  const messagesEndRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  // Initialize session\r\n  useEffect(() => {\r\n    const storedSessionId = localStorage.getItem('chat_session_id');\r\n    if (storedSessionId) {\r\n      setSessionId(storedSessionId);\r\n      loadChatHistory(storedSessionId);\r\n    } else {\r\n      const newSessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n      setSessionId(newSessionId);\r\n      localStorage.setItem('chat_session_id', newSessionId);\r\n    }\r\n  }, []);\r\n\r\n  // Auto-scroll to bottom (optimized to avoid forced reflow)\r\n  useEffect(() => {\r\n    if (messagesEndRef.current && messages.length > 0) {\r\n      // Use requestAnimationFrame to batch with other DOM operations\r\n      requestAnimationFrame(() => {\r\n        if (messagesEndRef.current) {\r\n          messagesEndRef.current.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\r\n        }\r\n      });\r\n    }\r\n  }, [messages.length]); // Only depend on length to reduce re-renders\r\n\r\n  // Focus input when opened (optimized to avoid setTimeout violation)\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      // Use requestAnimationFrame instead of setTimeout for better performance\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          inputRef.current?.focus();\r\n        });\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const loadChatHistory = async (sessionId) => {\r\n    try {\r\n      const response = await aiAPI.getChatHistory(sessionId);\r\n      if (response.data.success) {\r\n        const historyMessages = response.data.messages.map(msg => ({\r\n          id: msg.id,\r\n          user: msg.user_message,\r\n          ai: msg.ai_response,\r\n          timestamp: msg.created_at\r\n        }));\r\n        setMessages(historyMessages);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading chat history:', err);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const userMessage = inputMessage.trim();\r\n    setInputMessage('');\r\n    \r\n    // Add user message immediately\r\n    const userMsg = {\r\n      id: Date.now(),\r\n      user: userMessage,\r\n      ai: null,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    setMessages(prev => [...prev, userMsg]);\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await aiAPI.chat(userMessage, sessionId, {\r\n        include_orders: true\r\n      });\r\n\r\n      if (response.data.success) {\r\n        const aiMsg = {\r\n          id: response.data.message_id || Date.now() + 1,\r\n          user: userMessage,\r\n          ai: response.data.response,\r\n          timestamp: new Date().toISOString(),\r\n          suggestions: response.data.suggestions || []\r\n        };\r\n        \r\n        setMessages(prev => {\r\n          const updated = [...prev];\r\n          updated[updated.length - 1] = aiMsg;\r\n          return updated;\r\n        });\r\n      } else {\r\n        throw new Error(response.data.message || 'Failed to get response');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error sending message:', err);\r\n      \r\n      // Provide fallback responses for common questions\r\n      const fallbackResponse = getFallbackResponse(userMessage);\r\n      \r\n      const errorMsg = {\r\n        id: Date.now() + 1,\r\n        user: userMessage,\r\n        ai: fallbackResponse,\r\n        timestamp: new Date().toISOString(),\r\n        isError: !fallbackResponse.includes('How to create a new order') // Only mark as error if no fallback\r\n      };\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[updated.length - 1] = errorMsg;\r\n        return updated;\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const clearChat = async () => {\r\n    if (!sessionId) return;\r\n    \r\n    try {\r\n      await aiAPI.clearChat(sessionId);\r\n      setMessages([]);\r\n    } catch (err) {\r\n      console.error('Error clearing chat:', err);\r\n    }\r\n  };\r\n\r\n  const handleQuickSuggestion = (suggestion) => {\r\n    setInputMessage(suggestion);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  const widgetContent = (\r\n    <>\r\n      {/* Floating Button */}\r\n      <motion.button\r\n        className=\"chat-widget-button\"\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        whileHover={{ scale: 1.1, rotate: 5 }}\r\n        whileTap={{ scale: 0.9 }}\r\n        initial={{ scale: 0 }}\r\n        animate={{ \r\n          scale: 1,\r\n          boxShadow: [\r\n            \"0 4px 20px rgba(255, 215, 0, 0.4)\",\r\n            \"0 4px 30px rgba(255, 215, 0, 0.6)\",\r\n            \"0 4px 20px rgba(255, 215, 0, 0.4)\"\r\n          ]\r\n        }}\r\n        transition={{ \r\n          type: \"spring\", \r\n          stiffness: 260, \r\n          damping: 20,\r\n          boxShadow: {\r\n            duration: 2,\r\n            repeat: Infinity,\r\n            ease: \"easeInOut\"\r\n          }\r\n        }}\r\n      >\r\n        {isOpen ? (\r\n          <HiX />\r\n        ) : (\r\n          <motion.div\r\n            className=\"chat-icon-container\"\r\n            animate={{\r\n              rotate: [0, 10, -10, 0],\r\n            }}\r\n            transition={{\r\n              duration: 3,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\"\r\n            }}\r\n          >\r\n            <HiChip className=\"chat-icon-main\" />\r\n            <HiSparkles className=\"chat-icon-sparkle\" />\r\n          </motion.div>\r\n        )}\r\n        {!isOpen && messages.length > 0 && (\r\n          <motion.span \r\n            className=\"chat-badge\"\r\n            animate={{ scale: [1, 1.2, 1] }}\r\n            transition={{ duration: 1.5, repeat: Infinity }}\r\n          >\r\n            {messages.length}\r\n          </motion.span>\r\n        )}\r\n        {!isOpen && (\r\n          <motion.span \r\n            className=\"chat-pulse-ring\"\r\n            animate={{ scale: [1, 1.5], opacity: [0.6, 0] }}\r\n            transition={{ duration: 2, repeat: Infinity }}\r\n          />\r\n        )}\r\n      </motion.button>\r\n\r\n      {/* Chat Window */}\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            className=\"chat-widget-window\"\r\n            initial={{ opacity: 0, y: 20, scale: 0.9 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: 20, scale: 0.9 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"chat-widget-header\">\r\n              <div className=\"chat-header-content\">\r\n                <HiSparkles className=\"chat-header-icon\" />\r\n                <div>\r\n                  <h3>AI Assistant</h3>\r\n                  <p>Ask me anything about the system</p>\r\n                </div>\r\n              </div>\r\n              <button className=\"chat-close-btn\" onClick={() => setIsOpen(false)}>\r\n                <HiX />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Messages */}\r\n            <div className=\"chat-widget-messages\">\r\n              {messages.length === 0 && (\r\n                <div className=\"chat-welcome\">\r\n                  <HiSparkles className=\"welcome-icon\" />\r\n                  <h4>Hello! I'm your AI assistant</h4>\r\n                  <p>I can help you with:</p>\r\n                  <ul>\r\n                    <li>System navigation and features</li>\r\n                    <li>Order management</li>\r\n                    <li>Business insights</li>\r\n                    <li>General questions</li>\r\n                  </ul>\r\n                  <div className=\"quick-suggestions\">\r\n                    <p>Try asking:</p>\r\n                    {[\"How do I create a new order?\", \"What are the keyboard shortcuts?\", \"How do I filter orders?\"].map((suggestion, idx) => (\r\n                      <button\r\n                        key={idx}\r\n                        className=\"quick-suggestion-btn\"\r\n                        onClick={() => handleQuickSuggestion(suggestion)}\r\n                      >\r\n                        {suggestion}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {messages.map((msg) => (\r\n                <div key={msg.id} className=\"chat-message-group\">\r\n                  {msg.user && (\r\n                    <div className=\"chat-message user-message\">\r\n                      <div className=\"message-content\">{msg.user}</div>\r\n                    </div>\r\n                  )}\r\n                  {msg.ai && (\r\n                    <div className=\"chat-message ai-message\">\r\n                      <HiSparkles className=\"ai-icon\" />\r\n                      <div className=\"message-content\">{msg.ai}</div>\r\n                    </div>\r\n                  )}\r\n                  {msg.suggestions && msg.suggestions.length > 0 && (\r\n                    <div className=\"message-suggestions\">\r\n                      {msg.suggestions.map((suggestion, idx) => (\r\n                        <button\r\n                          key={idx}\r\n                          className=\"suggestion-btn\"\r\n                          onClick={() => handleQuickSuggestion(suggestion)}\r\n                        >\r\n                          {suggestion}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n\r\n              {isLoading && (\r\n                <div className=\"chat-message ai-message\">\r\n                  <HiSparkles className=\"ai-icon\" />\r\n                  <div className=\"message-content typing\">\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Input */}\r\n            <form className=\"chat-widget-input\" onSubmit={sendMessage}>\r\n              <input\r\n                ref={inputRef}\r\n                type=\"text\"\r\n                value={inputMessage}\r\n                onChange={(e) => setInputMessage(e.target.value)}\r\n                placeholder=\"Ask me anything...\"\r\n                disabled={isLoading}\r\n              />\r\n              <button type=\"submit\" disabled={!inputMessage.trim() || isLoading}>\r\n                <HiPaperAirplane />\r\n              </button>\r\n              {messages.length > 0 && (\r\n                <button type=\"button\" className=\"clear-btn\" onClick={clearChat} title=\"Clear chat\">\r\n                  Clear\r\n                </button>\r\n              )}\r\n            </form>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n\r\n  if (!isMounted) {\r\n    return null;\r\n  }\r\n\r\n  return createPortal(widgetContent, document.body);\r\n};\r\n\r\nexport default memo(AIChatWidget);\r\n\r\n"],"names":["AIChatWidget","isOpen","setIsOpen","useState","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","sessionId","setSessionId","isMounted","setIsMounted","useEffect","messagesEndRef","useRef","inputRef","storedSessionId","localStorage","getItem","loadChatHistory","newSessionId","concat","Date","now","Math","random","toString","substr","setItem","current","length","requestAnimationFrame","scrollIntoView","behavior","block","_inputRef$current","focus","async","response","aiAPI","getChatHistory","data","success","historyMessages","map","msg","id","user","user_message","ai","ai_response","timestamp","created_at","err","console","error","handleQuickSuggestion","suggestion","_inputRef$current2","widgetContent","_jsxs","_Fragment","children","motion","button","className","onClick","whileHover","scale","rotate","whileTap","initial","animate","boxShadow","transition","type","stiffness","damping","duration","repeat","Infinity","ease","_jsx","HiX","div","HiChip","HiSparkles","span","opacity","AnimatePresence","y","exit","idx","suggestions","ref","onSubmit","e","preventDefault","trim","userMessage","userMsg","toISOString","prev","chat","include_orders","Error","message","aiMsg","message_id","updated","fallbackResponse","lowerMessage","toLowerCase","includes","getFallbackResponse","errorMsg","isError","value","onChange","target","placeholder","disabled","HiPaperAirplane","clearChat","title","createPortal","document","body","memo"],"sourceRoot":""}