"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[146],{2146:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(5043),n=t(7950),r=t(6446),i=t(9570),o=t(9926),c=t(4505),l=t(579);const d=()=>{const[e,s]=(0,a.useState)(!1),[t,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(""),[m,g]=(0,a.useState)(!1),[p,w]=(0,a.useState)(null),[x,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>(y(!0),()=>y(!1)),[]);const j=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=localStorage.getItem("chat_session_id");if(e)w(e),b(e);else{const e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));w(e),localStorage.setItem("chat_session_id",e)}},[]),(0,a.useEffect)(()=>{j.current&&t.length>0&&requestAnimationFrame(()=>{j.current&&j.current.scrollIntoView({behavior:"smooth",block:"nearest"})})},[t.length]),(0,a.useEffect)(()=>{e&&f.current&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e;null===(e=f.current)||void 0===e||e.focus()})})},[e]);const b=async e=>{try{const s=await c.f3.getChatHistory(e);if(s.data.success){const e=s.data.messages.map(e=>({id:e.id,user:e.user_message,ai:e.ai_response,timestamp:e.created_at}));d(e)}}catch(s){console.error("Error loading chat history:",s)}},v=e=>{var s;h(e),null===(s=f.current)||void 0===s||s.focus()},S=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.P.button,{className:"chat-widget-button",onClick:()=>s(!e),whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},initial:{scale:0},animate:{scale:1,boxShadow:["0 4px 20px rgba(255, 215, 0, 0.4)","0 4px 30px rgba(255, 215, 0, 0.6)","0 4px 20px rgba(255, 215, 0, 0.4)"]},transition:{type:"spring",stiffness:260,damping:20,boxShadow:{duration:2,repeat:1/0,ease:"easeInOut"}},children:[e?(0,l.jsx)(o.U_s,{}):(0,l.jsxs)(r.P.div,{className:"chat-icon-container",animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[(0,l.jsx)(o.So4,{className:"chat-icon-main"}),(0,l.jsx)(o.pCw,{className:"chat-icon-sparkle"})]}),!e&&t.length>0&&(0,l.jsx)(r.P.span,{className:"chat-badge",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:t.length}),!e&&(0,l.jsx)(r.P.span,{className:"chat-pulse-ring",animate:{scale:[1,1.5],opacity:[.6,0]},transition:{duration:2,repeat:1/0}})]}),(0,l.jsx)(i.N,{children:e&&(0,l.jsxs)(r.P.div,{className:"chat-widget-window",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{duration:.2},children:[(0,l.jsxs)("div",{className:"chat-widget-header",children:[(0,l.jsxs)("div",{className:"chat-header-content",children:[(0,l.jsx)(o.pCw,{className:"chat-header-icon"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"AI Assistant"}),(0,l.jsx)("p",{children:"Ask me anything about the system"})]})]}),(0,l.jsx)("button",{className:"chat-close-btn",onClick:()=>s(!1),children:(0,l.jsx)(o.U_s,{})})]}),(0,l.jsxs)("div",{className:"chat-widget-messages",children:[0===t.length&&(0,l.jsxs)("div",{className:"chat-welcome",children:[(0,l.jsx)(o.pCw,{className:"welcome-icon"}),(0,l.jsx)("h4",{children:"Hello! I'm your AI assistant"}),(0,l.jsx)("p",{children:"I can help you with:"}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"System navigation and features"}),(0,l.jsx)("li",{children:"Order management"}),(0,l.jsx)("li",{children:"Business insights"}),(0,l.jsx)("li",{children:"General questions"})]}),(0,l.jsxs)("div",{className:"quick-suggestions",children:[(0,l.jsx)("p",{children:"Try asking:"}),["How do I create a new order?","What are the keyboard shortcuts?","How do I filter orders?"].map((e,s)=>(0,l.jsx)("button",{className:"quick-suggestion-btn",onClick:()=>v(e),children:e},s))]})]}),t.map(e=>(0,l.jsxs)("div",{className:"chat-message-group",children:[e.user&&(0,l.jsx)("div",{className:"chat-message user-message",children:(0,l.jsx)("div",{className:"message-content",children:e.user})}),e.ai&&(0,l.jsxs)("div",{className:"chat-message ai-message",children:[(0,l.jsx)(o.pCw,{className:"ai-icon"}),(0,l.jsx)("div",{className:"message-content",children:e.ai})]}),e.suggestions&&e.suggestions.length>0&&(0,l.jsx)("div",{className:"message-suggestions",children:e.suggestions.map((e,s)=>(0,l.jsx)("button",{className:"suggestion-btn",onClick:()=>v(e),children:e},s))})]},e.id)),m&&(0,l.jsxs)("div",{className:"chat-message ai-message",children:[(0,l.jsx)(o.pCw,{className:"ai-icon"}),(0,l.jsxs)("div",{className:"message-content typing",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})]}),(0,l.jsx)("div",{ref:j})]}),(0,l.jsxs)("form",{className:"chat-widget-input",onSubmit:async e=>{if(e.preventDefault(),!u.trim()||m)return;const s=u.trim();h("");const t={id:Date.now(),user:s,ai:null,timestamp:(new Date).toISOString()};d(e=>[...e,t]),g(!0);try{const e=await c.f3.chat(s,p,{include_orders:!0});if(!e.data.success)throw new Error(e.data.message||"Failed to get response");{const t={id:e.data.message_id||Date.now()+1,user:s,ai:e.data.response,timestamp:(new Date).toISOString(),suggestions:e.data.suggestions||[]};d(e=>{const s=[...e];return s[s.length-1]=t,s})}}catch(a){console.error("Error sending message:",a);const e=(e=>{const s=e.toLowerCase();return s.includes("create")&&(s.includes("order")||s.includes("new order"))?'**How to create a new order:**\n\n1. **Click "New Order"** in the navigation menu (or press keyboard shortcut **2**)\n2. **Fill in the order form:**\n   - **Customer Name** (required)\n   - **Phone Number** (required)\n   - **Product Type** (required) - e.g., "Laptop Dell XPS 15"\n   - **Quantity** (required)\n   - **Delivery Date** (required)\n\n3. **Optional: Use AI Fill**\n   - Click "Use AI Fill (Natural Language)"\n   - Type your order in plain text, e.g., "John Smith needs 2 laptops for next Friday"\n   - Click "AI Fill Form" to auto-populate the form\n\n4. **Click "Create Order"** to submit\n\nThe order will be created and appear in your Orders list!':s.includes("navigate")||s.includes("go to")||s.includes("where")?"**Navigation Guide:**\n\n- **Dashboard** (Shortcut: 1) - View statistics and analytics\n- **New Order** (Shortcut: 2) - Create a new customer order\n- **Orders** (Shortcut: 3) - View and manage all orders\n- **Suppliers** (Shortcut: 4) - Communicate with suppliers\n- **Accounting** (Shortcut: 5) - View financial reports\n- **AI Insights** (Shortcut: 6) - AI-powered analytics\n- **AI Chat** (Shortcut: 7) - Chat with AI assistant\n\nYou can use keyboard shortcuts (1-7) or click the menu items!":s.includes("order")&&(s.includes("manage")||s.includes("view")||s.includes("list"))?'**Order Management:**\n\n1. **View Orders:** Click "Orders" in navigation (Shortcut: 3)\n2. **Filter Orders:** Use the status filter dropdown\n3. **Search Orders:** Type in the search box\n4. **Update Status:** Click on an order card, then use the status dropdown\n5. **Export Data:** Click "Export to CSV" button\n\nOrder statuses: Pending \u2192 In Preparation \u2192 Ready \u2192 Delivered':s.includes("help")||s.includes("how")||s.includes("what")?"**I can help you with:**\n\n\u2705 Creating new orders\n\u2705 Managing existing orders\n\u2705 Navigating the system\n\u2705 Understanding features\n\u2705 Order status updates\n\u2705 Supplier communication\n\u2705 Accounting and reports\n\u2705 AI insights and analytics\n\n**Quick Tips:**\n- Use keyboard shortcuts (1-7) for fast navigation\n- Try AI Fill for natural language order entry\n- Check the Dashboard for real-time statistics\n- Use filters and search to find specific orders\n\nWhat would you like to know more about?":'Sorry, I\'m having trouble connecting to the AI service right now. \n\n**But I can still help!** Here are some quick answers:\n\n\ud83d\udcdd **Create Order:** Click "New Order" (Shortcut: 2) and fill in the form\n\ud83d\udccb **View Orders:** Click "Orders" (Shortcut: 3)\n\ud83d\udcca **Dashboard:** Click "Dashboard" (Shortcut: 1)\n\ud83e\udd16 **AI Features:** Click "AI Insights" (Shortcut: 6)\n\nTry asking: "How do I create a new order?" or "How do I navigate?"'})(s),t={id:Date.now()+1,user:s,ai:e,timestamp:(new Date).toISOString(),isError:!e.includes("How to create a new order")};d(e=>{const s=[...e];return s[s.length-1]=t,s})}finally{g(!1)}},children:[(0,l.jsx)("input",{ref:f,type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Ask me anything...",disabled:m}),(0,l.jsx)("button",{type:"submit",disabled:!u.trim()||m,children:(0,l.jsx)(o._Fn,{})}),t.length>0&&(0,l.jsx)("button",{type:"button",className:"clear-btn",onClick:async()=>{if(p)try{await c.f3.clearChat(p),d([])}catch(e){console.error("Error clearing chat:",e)}},title:"Clear chat",children:"Clear"})]})]})})]});return x?(0,n.createPortal)(S,document.body):null},u=(0,a.memo)(d)}}]);
//# sourceMappingURL=146.ad0657a7.chunk.js.map