"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[90],{6090:(e,s,r)=>{r.r(s),r.d(s,{default:()=>o});var a=r(5043),i=r(6446),t=r(5016),l=r(4505),d=r(579);const n=e=>{let{orders:s=[]}=e;const{user:r}=(0,t.A)(),[n,o]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await l.gH.getDashboardStats();u(e.data)}catch(e){console.error("Error fetching stats:",e)}finally{o(!1)}},h=(0,a.useMemo)(()=>null!==r&&void 0!==r&&r.id?s.filter(e=>!e.supplier_id||e.supplier_id===r.id):s,[s,r]),m=(0,a.useMemo)(()=>h.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{}),[h]),v=(0,a.useMemo)(()=>[...h].sort((e,s)=>new Date(s.createdAt)-new Date(e.createdAt)).slice(0,5),[h]),x=(0,a.memo)(e=>{let{title:s,value:r,icon:a,color:t,delay:l=0}=e;return(0,d.jsxs)(i.P.div,{className:"supplier-stat-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l,duration:.3},children:[(0,d.jsx)("div",{className:"supplier-stat-icon",style:{background:"".concat(t,"20"),color:t},children:a}),(0,d.jsxs)("div",{className:"supplier-stat-content",children:[(0,d.jsx)("p",{className:"supplier-stat-title",children:s}),(0,d.jsx)("h3",{className:"supplier-stat-value",children:r})]})]})});return n?(0,d.jsx)("div",{className:"supplier-loading",children:"Loading your dashboard..."}):(0,d.jsxs)("div",{className:"supplier-dashboard",children:[(0,d.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"supplier-dashboard-header",children:[(0,d.jsx)("h1",{children:"Supplier Dashboard"}),(0,d.jsxs)("p",{children:["Welcome back, ",(null===r||void 0===r?void 0:r.first_name)||(null===r||void 0===r?void 0:r.username)||"Supplier","! Manage your orders and requests."]})]}),(0,d.jsxs)("div",{className:"supplier-stats-grid",children:[(0,d.jsx)(x,{title:"Pending Requests",value:(null===c||void 0===c?void 0:c.pending_orders)||0,icon:"\ud83d\udccb",color:"rgba(74, 144, 226, 1)",delay:.1}),(0,d.jsx)(x,{title:"Active Orders",value:(m["in-preparation"]||0)+(m.ready||0),icon:"\ud83d\udce6",color:"rgba(80, 201, 206, 1)",delay:.2}),(0,d.jsx)(x,{title:"Completed This Month",value:m.delivered||0,icon:"\u2705",color:"rgba(107, 207, 127, 1)",delay:.3}),(0,d.jsx)(x,{title:"Total Revenue",value:"$".concat(((null===c||void 0===c?void 0:c.total_revenue)||0).toLocaleString()),icon:"\ud83d\udcb0",color:"rgba(59, 130, 246, 1)",delay:.4})]}),(0,d.jsxs)("div",{className:"supplier-recent-orders",children:[(0,d.jsx)("h2",{children:"Recent Assigned Orders"}),0===v.length?(0,d.jsxs)("div",{className:"supplier-empty-state",children:[(0,d.jsx)("p",{children:"No orders assigned to you yet."}),(0,d.jsx)("p",{children:'Check "Order Requests" to see incoming requests and create offers!'})]}):(0,d.jsx)("div",{className:"supplier-orders-list",children:v.map((e,s)=>(0,d.jsxs)(i.P.div,{className:"supplier-order-card",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*s},children:[(0,d.jsxs)("div",{className:"supplier-order-header",children:[(0,d.jsxs)("span",{className:"supplier-order-id",children:["Order #",e.id]}),(0,d.jsx)("span",{className:"supplier-order-status status-".concat(e.status),children:e.status.replace("-"," ")})]}),(0,d.jsxs)("div",{className:"supplier-order-body",children:[(0,d.jsxs)("div",{className:"supplier-order-product",children:[(0,d.jsx)("strong",{children:e.productType}),(0,d.jsxs)("span",{children:["Qty: ",e.quantity]})]}),(0,d.jsx)("div",{className:"supplier-order-customer",children:(0,d.jsxs)("span",{children:["Customer: ",e.customerName||"N/A"]})}),(0,d.jsxs)("div",{className:"supplier-order-dates",children:[(0,d.jsxs)("span",{children:["Assigned: ",new Date(e.createdAt).toLocaleDateString()]}),e.deliveryDate&&(0,d.jsxs)("span",{children:["Delivery: ",new Date(e.deliveryDate).toLocaleDateString()]})]}),e.totalAmount&&(0,d.jsxs)("div",{className:"supplier-order-amount",children:["Amount: $",e.totalAmount.toLocaleString()]})]})]},e.id))})]})]})},o=(0,a.memo)(n)}}]);
//# sourceMappingURL=90.ad3579d8.chunk.js.map