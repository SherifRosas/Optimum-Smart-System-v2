"use strict";(self.webpackChunkoptimum_frontend=self.webpackChunkoptimum_frontend||[]).push([[369],{5369:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(5043),l=a(6446),r=a(4505),i=a(8254),c=a(579);const n=e=>{let{orders:s=[]}=e;const a=(0,i.d)(),[n,d]=(0,t.useState)(""),[o,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(null);t.useEffect(()=>{const e=setTimeout(()=>{u(n)},300);return()=>clearTimeout(e)},[n]);const p=(0,t.useMemo)(()=>s.filter(e=>"pending"===e.status),[s]),x=(0,t.useMemo)(()=>p.filter(e=>{var s,a,t;return""===o||(null===(s=e.productType)||void 0===s?void 0:s.toLowerCase().includes(o.toLowerCase()))||(null===(a=e.customerName)||void 0===a?void 0:a.toLowerCase().includes(o.toLowerCase()))||(null===(t=e.id)||void 0===t?void 0:t.toString().includes(o))}),[p,o]),j=async e=>{a.success("Offer creation feature coming soon!")},N=async e=>{try{await r.gH.updateOrderStatus(e,"in-preparation"),a.success("Order request accepted!"),h(null)}catch(s){a.error("Failed to accept request")}};return(0,c.jsxs)("div",{className:"order-requests",children:[(0,c.jsxs)("div",{className:"order-requests-header",children:[(0,c.jsx)("h1",{children:"Order Requests"}),(0,c.jsx)("p",{children:"View incoming order requests and create offers"})]}),(0,c.jsx)("div",{className:"order-requests-filters",children:(0,c.jsx)("div",{className:"requests-search-box",children:(0,c.jsx)("input",{type:"text",placeholder:"Search by product, customer, or order ID...",value:n,onChange:e=>d(e.target.value),className:"requests-search-input"})})}),(0,c.jsx)("div",{className:"order-requests-content",children:0===x.length?(0,c.jsxs)("div",{className:"requests-empty-state",children:[(0,c.jsx)("p",{children:"No pending order requests at the moment."}),(0,c.jsx)("p",{children:"New requests will appear here when customers place orders."})]}):(0,c.jsx)("div",{className:"requests-grid",children:x.map((e,s)=>(0,c.jsxs)(l.P.div,{className:"request-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},onClick:()=>h(e),children:[(0,c.jsxs)("div",{className:"request-header",children:[(0,c.jsxs)("span",{className:"request-id",children:["Request #",e.id]}),(0,c.jsx)("span",{className:"request-badge",children:"New"})]}),(0,c.jsxs)("div",{className:"request-body",children:[(0,c.jsxs)("div",{className:"request-product",children:[(0,c.jsx)("strong",{children:e.productType||"Unknown Product"}),(0,c.jsxs)("span",{children:["Quantity: ",e.quantity]})]}),(0,c.jsx)("div",{className:"request-customer",children:(0,c.jsxs)("span",{children:["Customer: ",e.customerName||"N/A"]})}),(0,c.jsxs)("div",{className:"request-dates",children:[(0,c.jsxs)("span",{children:["Requested: ",new Date(e.createdAt).toLocaleDateString()]}),e.deliveryDate&&(0,c.jsxs)("span",{children:["Delivery: ",new Date(e.deliveryDate).toLocaleDateString()]})]}),e.totalAmount&&(0,c.jsxs)("div",{className:"request-amount",children:["Estimated: $",e.totalAmount.toLocaleString()]})]}),(0,c.jsxs)("div",{className:"request-actions",children:[(0,c.jsx)("button",{className:"request-action-btn primary",onClick:s=>{s.stopPropagation(),j(e.id)},children:"Create Offer"}),(0,c.jsx)("button",{className:"request-action-btn secondary",onClick:s=>{s.stopPropagation(),N(e.id)},children:"Accept"})]})]},e.id))})}),m&&(0,c.jsx)("div",{className:"request-modal-overlay",onClick:()=>h(null),children:(0,c.jsxs)(l.P.div,{className:"request-modal",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"request-modal-header",children:[(0,c.jsx)("h2",{children:"Request Details"}),(0,c.jsx)("button",{className:"modal-close",onClick:()=>h(null),children:"\xd7"})]}),(0,c.jsxs)("div",{className:"request-modal-body",children:[(0,c.jsxs)("div",{className:"request-detail-row",children:[(0,c.jsx)("span",{className:"detail-label",children:"Request ID:"}),(0,c.jsxs)("span",{className:"detail-value",children:["#",m.id]})]}),(0,c.jsxs)("div",{className:"request-detail-row",children:[(0,c.jsx)("span",{className:"detail-label",children:"Product:"}),(0,c.jsx)("span",{className:"detail-value",children:m.productType})]}),(0,c.jsxs)("div",{className:"request-detail-row",children:[(0,c.jsx)("span",{className:"detail-label",children:"Quantity:"}),(0,c.jsx)("span",{className:"detail-value",children:m.quantity})]}),(0,c.jsxs)("div",{className:"request-detail-row",children:[(0,c.jsx)("span",{className:"detail-label",children:"Customer:"}),(0,c.jsx)("span",{className:"detail-value",children:m.customerName||"N/A"})]}),(0,c.jsxs)("div",{className:"request-detail-row",children:[(0,c.jsx)("span",{className:"detail-label",children:"Delivery Date:"}),(0,c.jsx)("span",{className:"detail-value",children:m.deliveryDate?new Date(m.deliveryDate).toLocaleDateString():"Not specified"})]}),m.totalAmount&&(0,c.jsxs)("div",{className:"request-detail-row",children:[(0,c.jsx)("span",{className:"detail-label",children:"Estimated Amount:"}),(0,c.jsxs)("span",{className:"detail-value amount",children:["$",m.totalAmount.toLocaleString()]})]})]}),(0,c.jsxs)("div",{className:"request-modal-actions",children:[(0,c.jsx)("button",{className:"modal-action-btn primary",onClick:()=>{j(m.id),h(null)},children:"Create Offer"}),(0,c.jsx)("button",{className:"modal-action-btn secondary",onClick:()=>{N(m.id)},children:"Accept Request"})]})]})})]})},d=(0,t.memo)(n)}}]);
//# sourceMappingURL=369.a52fb017.chunk.js.map